{"version":3,"sources":["../../../../../assets/script/event/assets/script/event/event_mgr.ts"],"names":[],"mappings":";;;;;AAAA;IAKI;QAEI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAEM,kBAAQ,GAAf;QAEI,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CACd,CAAC;YACG,IAAI,CAAC,IAAI,GAAG,IAAI,SAAS,EAAE,CAAC;QAChC,CAAC;QACD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,wBAAI,GAAJ,UAAK,KAAgB;QAAE,gBAAe;aAAf,UAAe,EAAf,qBAAe,EAAf,IAAe;YAAf,+BAAe;;QAElC,IAAI,GAAG,GAAS,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACtC,EAAE,CAAA,CAAC,CAAC,GAAG,CAAC,CACR,CAAC;YACG,MAAM,CAAC;QACX,CAAC;QACD,GAAG,CAAA,CAAC,IAAI,CAAC,GAAU,CAAC,EAAE,GAAG,GAAU,GAAG,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAC9D,CAAC;YACG,IAAI,EAAE,GAAO,GAAG,CAAC,CAAC,CAAC,CAAC;YACpB,IAAI,IAAI,GAAO,GAAG,CAAC,CAAC,GAAC,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,IAAI,OAAP,EAAE,GAAM,IAAI,SAAK,MAAM,GAAE;QAC7B,CAAC;IACL,CAAC;IAED,uBAAG,GAAH,UAAI,KAAgB,EAAE,EAAW,EAAE,IAAe;QAAf,qBAAA,EAAA,WAAe;QAE9C,IAAI,GAAG,GAAS,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACtC,EAAE,CAAA,CAAC,CAAC,GAAG,CAAC,CACR,CAAC;YACG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;QACrC,CAAC;QACD,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;IACvB,CAAC;IAED,0BAAM,GAAN,UAAO,KAAgB,EAAE,EAAW;QAEhC,IAAI,GAAG,GAAS,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACtC,EAAE,CAAA,CAAC,CAAC,GAAG,CAAC,CACR,CAAC;YACG,MAAM,CAAC;QACX,CAAC;QACD,IAAI,KAAK,GAAU,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QACnC,EAAE,CAAA,CAAC,KAAK,GAAG,CAAC,CAAC,CACb,CAAC;YACG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,KAAK,EAAE,sBAAsB,CAAC,CAAC;YAC3D,MAAM,CAAC;QACX,CAAC;QACD,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACzB,CAAC;IAED,yBAAK,GAAL;QAEI,GAAG,CAAA,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,CAC9B,CAAC;YACG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IACL,gBAAC;AAAD,CApEA,AAoEC,IAAA;AApEY,8BAAS;AAsEtB,WAAW;AACX,IAAY,UASX;AATD,WAAY,UAAU;IAClB,+DAAc,CAAA;IACd,2DAAY,CAAA;IACZ,2DAAY,CAAA;IACZ,6DAAa,CAAA;IACb,qEAAiB,CAAA;IACjB,uEAAkB,CAAA;IAClB,iDAAO,CAAA;IACP,iDAAO,CAAA;AACX,CAAC,EATW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QASrB","file":"","sourceRoot":"../../../../../assets/script/event","sourcesContent":["export class event_mgr\n{\n    private static inst:event_mgr;\n    private listeners:any;          //Event_Name => cb[]\n\n    private constructor()\n    {\n        this.listeners = {};\n    }\n\n    static get_inst():event_mgr\n    {\n        if(!this.inst)\n        {\n            this.inst = new event_mgr();\n        }\n        return this.inst;\n    }\n\n    fire(event:Event_Name, ...params:any[]):void\n    {\n        let cbs:any[] = this.listeners[event];\n        if(!cbs)\n        {\n            return;\n        }\n        for(let i:number = 0, len:number = cbs.length; i < len; i += 2)\n        {\n            let cb:any = cbs[i];\n            let host:any = cbs[i+1];\n            cb.call(host, ...params);\n        }\n    }\n\n    add(event:Event_Name, cb:Function, host:any = null):void\n    {\n        let cbs:any[] = this.listeners[event];\n        if(!cbs)\n        {\n            this.listeners[event] = cbs = []; \n        }\n        cbs.push(cb, host);\n    }\n\n    remove(event:Event_Name, cb:Function)\n    {\n        let cbs:any[] = this.listeners[event];\n        if(!cbs)\n        {\n            return;\n        }\n        let index:number = cbs.indexOf(cb);\n        if(index < 0)\n        {\n            cc.warn(\"event_mgr remove\", event, \", but cb not exists!\");\n            return;\n        }\n        cbs.splice(index, 2);\n    }\n\n    clear()\n    {\n        for(let key in this.listeners)\n        {\n            this.listeners[key].length = 0;\n        }\n        this.listeners = {};\n    }\n}\n\n/**事件名称定义*/\nexport enum Event_Name {\n    USER_INFO_INIT,\n    COIN_CHANGED,\n    PASS_CHANGED,\n    GRADE_CHANGED,\n    SHAREHINT_CHANGED,\n    GAME_LEVEL_CHANGED,\n    UI_SHOW,\n    UI_HIDE,\n}"]}